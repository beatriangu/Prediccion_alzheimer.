{% extends 'base.html' %}

{% block title %}Resultados de Juegos de {{ patient.name }}{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üéÆ Resultados de juegos de {{ patient.name }}</h2>
    <a href="{% url 'patients:list_patients' %}" class="btn btn-outline-secondary">‚¨ÖÔ∏è Volver a pacientes</a>
  </div>

  {% if game_results %}
    <table class="table table-striped table-hover">
      <thead class="table-light">
        <tr>
          <th>Juego</th>
          <th>Fecha</th>
          <th>Puntuaci√≥n</th>
          <th>Errores</th>
          <th>Tiempo (s)</th>
        </tr>
      </thead>
      <tbody>
        {% for result in game_results %}
          <tr>
            <td>{{ result.game.name }}</td>
            <td>{{ result.date_played|date:"d/m/Y H:i" }}</td>
            <td>
              {% if result.score >= 8 %}
                <span class="badge bg-success">{{ result.score }}</span>
              {% elif result.score >= 5 %}
                <span class="badge bg-warning text-dark">{{ result.score }}</span>
              {% else %}
                <span class="badge bg-danger">{{ result.score }}</span>
              {% endif %}
            </td>
            
            <td>{{ result.errors }}</td>
            <td>{{ result.time_spent }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="alert alert-warning">Este paciente a√∫n no ha jugado ning√∫n juego.</div>
  {% endif %}
{% endblock %}
